import requests
import time

# Firebase Realtime Database URL
database_url = "https://signlingual-901cc-default-rtdb.firebaseio.com"

def get_ready_status():
    """
    Check the 'ready' key in Firebase and return its value.
    """
    # headers = {'Cache-Control': 'no-cache', 'Pragma': 'no-cache'}
    response = requests.get(f"{database_url}/ready.json")
    ready_status = response.json()
    print("Ready status response:", ready_status, "Type:", type(ready_status))  # Debugging print
    return ready_status

def send_data():
    """
    Send a string to the 'sentence' key in Firebase.
    """
    sentence = " Testing "
    response = requests.put(f"{database_url}/sentence.json", json=sentence)
    print("Sending data response:", response.status_code, response.json())  # Debugging print
    if response.status_code == 200:
        print("Data sent to Firebase.")
    else:
        print(f"Failed to send data. Status code: {response.status_code}")

while True:
    ready = get_ready_status()
    print("Checking if ready is True:", ready)  # Debugging
    if ready:
        print("Ready is True. Proceeding to send data.")
        send_data()
    else:
        print("Ready is not True. Waiting...")
    time.sleep(5)  # Sleep for 5 seconds before checking again
